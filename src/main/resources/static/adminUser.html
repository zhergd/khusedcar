<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <title>科汇二手车超级管理员</title>
    <link rel="stylesheet" href=" css/common.css"/>
    <link rel="stylesheet" href=" css/web.css"/>
    <link rel="stylesheet" href=" css/fixed-table.css"/>
    <script src=" js/jquery-1.9.1.min.js"></script>
    <script src=" js/fixed-table.js"></script>
    <script>
        $(function () {

            var windowH = $(window).height();
            var tableH = $('.fixed-table_body-wraper');
            tableH.height(windowH - 287);

            var tableW = $('.table_wrapper').width();
            $('.fixed-table_header,.fixed-table_body').width(tableW);

            var windowW = $(window).width();
            // $('.right_area').width(windowW-170);
            // var windowH=$(window).height();
            $('.left_area,.right_area').height(windowH);

            $('.left_area li').click(function () {
                $(this).addClass('cur').siblings().removeClass('cur');
            });
            $('.select_pages').click(function () {
                $(this).find('.open_page').toggle();
            });
            $('.select_box').click(function () {
                $(this).find('.open_cons').toggle();
            });
            $('tbody').on('click','.add_puponp',function () {
                $('.popup_bg,.popup_content').show();
            });
            // $('.add_puponp').click(function () {
            //     $('.popup_bg,.popup_content').show();
            // });
            $('.popup_content .close_icon').click(function () {
                $('.popup_bg,.popup_content').hide();
            });
        });
    </script>
</head>

<body>
<div class="left_area">
    <h1><img src="  img/logo.png" alt=""></h1>
    <div class="user_info">
        <div class="user_ img">
            <img src="  img/user.png" alt="">
        </div>
        <p>超级管理员
            <a href="javascript:;"><i class="icons exit_icon"></i></a>
        </p>
    </div>
    <ul>
        <li>
            <a href="adminIndex.html"><i class="icons home_icon"></i>邀请码管理</a>
        </li>
        <li>
            <a href="adminCar.html"><i class="icons user_icon"></i>车辆管理</a>
        </li>
        <li>
            <a href="adminInsurance.html"><i class="icons zz_icon"></i>保险业务管理</a>
        </li>
        <li>
            <a href="adminMaintain.html"><i class="icons sh_icon"></i>保养业务管理</a>
        </li>
        <li class="cur">
            <a href="adminUser.html"><i class="icons xg_icon"></i>账户管理</a>
        </li>
    </ul>
</div>
<div class="innerPage tag_innerPage">
    <div class="tag_content">

        <a href="adminInsurance.html" class="cur">账户管理</a>

        <a href="adminUserRecord.html">操作记录</a>
    </div>
    <div class="function_bar clearfix">
        <div class="search_box">
            <div class="cons"><i class="icons search_icon"></i><input class="input_text" id="ttt"
                                                                      placeholder="请输入用户名称"/></div>
        </div>
        <div class="select_box">
            <a href="javascript:;" class="box" id="find"><i class="icons right_icon"></i>搜索</a>
        </div>
    </div>
    <div class="table_wrapper">
        <div class="fixed-table-box row-col-fixed">
            <!-- 表头 start -->
            <div class="fixed-table_header-wraper">
                <table class="fixed-table_header" cellspacing="0" cellpadding="0" border="0" width="100%">
                    <thead>
                    <tr>
                        <th width="5%">
                            <div class="table-cell">用户编号</div>
                        </th>
                        <th width="10%">
                            <div class="table-cell">姓名</div>
                        </th>
                        <th width="15%">
                            <div class="table-cell">账号</div>
                        </th>
                        <th width="15%">
                            <div class="table-cell">联系方式</div>
                        </th>
                        <th width="15%">
                            <div class="table-cell">所属企业</div>
                        </th>
                        <th width="20%">
                            <div class="table-cell">邮箱</div>
                        </th>
                        <th width="10%" data-fixed="true" data-direction="right">
                            <div class="table-cell">操作</div>
                        </th>
                        <th width="10%" data-fixed="true" data-direction="right">
                            <div class="table-cell">操作</div>
                        </th>
                    </tr>
                    </thead>
                </table>
            </div>
            <!-- 表头 end -->
            <!-- 表格内容 start -->
            <div class="fixed-table_body-wraper">
                <table class="fixed-table_body" cellspacing="0" cellpadding="0" border="0" width="100%" id="AllUser">
                    <tbody>
                    </tbody>
                </table>
            </div>
            <!-- 表格内容 end -->

        </div>
        <!--分页-->
        <div class="page_cons">
            <div class="cons">
                <ul>
                    <li>
                        共400条
                        <div class="select_pages">
                            <a href="javascript:;">100条/页<i class="icons down_icon"></i></a>
                            <div class="open_page">
                                <a href="javascript:;">200条/条</a>
                                <a href="javascript:;">300条/条</a>
                                <a href="javascript:;">400条/条</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="box">
                            <a href="javascript:;"><i class="icons left_icon"></i></a>
                            <a href="javascript:;" class="cur a1">1</a>
                            <a href="javascript:;" class="a1">2</a>
                            <a href="javascript:;" class="a1">3</a>
                            <a href="javascript:;" class="a1">4</a>
                            <a href="javascript:;"><i class="icons right_icon"></i></a>
                        </div>
                    </li>
                    <li>
                        <div class="go">
                            前往<input type="text" value="4">页
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--弹窗-->
<div class="popup_bg none" id="windowAdd"></div>
<div class="popup_content none" id="windowTwo">
    <div class="popup_header">
        <h3>重置密码</h3>
        <i class="icons close_icon"></i>
    </div>
    <div class="popup_cons">
        <ul>
            <li>
                <div class="input_box"><input type="text" placeholder="确认用户编号" id="id"></div>
            </li>
            <li>
                <div class="input_box"><input type="text" placeholder="请输入密码" id="password"></div>
            </li>
        </ul>
    </div>
    <div class="pupup_footer">
        <a href="javascript:;" class="btn resetPassword" >重置</a>
    </div>
</div>
<script>
    //初始化FixedTable
    $(".fixed-table-box").fixedTable();
</script>
</body>

<!--查询所有用户js-->
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.4.0/jquery.js"></script>
<script type="text/javascript">

    $(function () {
        $.ajax({
            url: '/khusedcar/admin/findAllUser',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                //方法中传入的参数data为后台获取的数据
                for (i in data.data) //data.data指的是数组，数组里是8个对象，i为数组的索引
                {

                    var tr;
                    tr = '<td width="5%">' + '<div class="table-cell">' + data.data[i].id + '</td>' + '</div>'
                        + '<td width="10%">' + '<div class="table-cell">' + data.data[i].name + '</td>' + '</div>'
                        + '<td width="15%">' + '<div class="table-cell">' + data.data[i].username + '</td>' + '</div>'
                        + '<td width="15%">' + '<div class="table-cell">' + data.data[i].phone + '</td>' + '</div>'
                        + '<td width="15%">' + '<div class="table-cell">' + data.data[i].companyName + '</td>' + '</div>'
                        + '<td width="20%">' + '<div class="table-cell">' + data.data[i].email + '</td>' + '</div>'
                        + '<td width="10%">' + '<div class="table-cell">' + '<a href="javascript:;" class="add_puponp" cc= ' + data.data[i].id + ' >' + '重置密码' + '</a>' + '</td>' + '</div>'
                        + '<td width="10%">' + '<div class="table-cell">' + '<a href="javascript:;" class="blocked" dd= ' + data.data[i].id + ' >' + '封禁' + '</a>' + '</td>' + '</div>'
                    $("#AllUser").append('<tr>' + tr + '</tr>');
                }
            }
        })
    })
</script>

<!--搜索用户-->
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.4.0/jquery.js"></script>
<script type="text/javascript">
    $(function () {

        $("#find").click(function () {
            $("#AllUser").empty();


            var name = $('#ttt').val();

            $.ajax({
                url: '/khusedcar/admin/findUserBy',
                type: 'GET',
                data: {
                    name: name
                },
                dataType: 'json',
                success: function (data) {
                    //方法中传入的参数data为后台获取的数据
                    for (i in data.data) //data.data指的是数组，数组里是8个对象，i为数组的索引
                    {
                        var tr;
                        tr = '<td width="5%">' + '<div class="table-cell">' + data.data[i].id + '</td>' + '</div>'
                            + '<td width="10%">' + '<div class="table-cell">' + data.data[i].name + '</td>' + '</div>'
                            + '<td width="15%">' + '<div class="table-cell">' + data.data[i].username + '</td>' + '</div>'
                            + '<td width="15%">' + '<div class="table-cell">' + data.data[i].phone + '</td>' + '</div>'
                            + '<td width="15%">' + '<div class="table-cell">' + data.data[i].companyName + '</td>' + '</div>'
                            + '<td width="20%">' + '<div class="table-cell">' + data.data[i].email + '</td>' + '</div>'
                            + '<td width="10%">' + '<div class="table-cell">' + '<a href="#" class="reset" cc= ' + data.data[i].id + ' >' + '重置密码' + '</a>' + '</td>' + '</div>'
                            + '<td width="10%">' + '<div class="table-cell">' + '<a href="#" class="blocked" dd= ' + data.data[i].id + ' >' + '封禁' + '</a>' + '</td>' + '</div>'
                        $("#AllUser").append('<tr>' + tr + '</tr>');
                    }
                }

            });
        });
    });
</script>

<!--重置密码-->
<script type="text/javascript">
    $(function () {

        $(".resetPassword").click(function () {

            var id = $('#id').val();
            var password = $('#password').val();

            $.ajax({

                type: 'GET',
                data: {id:id,password:password},
                dataType: 'json',
                url: '/khusedcar/admin/resetPassword',
                success: function (result) {
                    if (result.code == '0000') {
                        alert("重置密码成功");
                    } else if (result.code != '0000') {
                        alert("重置密码失败");
                    }
                    window.location.href = ("adminUser.html");
                },
                error: function (result) {
                    alert("操作失败");
                }
            });

        });

    });
</script>

<!--用户封禁-->
<script src="https://cdn.bootcss.com/jquery/1.12.3/jquery.js"></script>
<script type="text/javascript">

    $(function () {

        $('tbody').on('click', '.blocked', function () {
            var id = $(this).attr("dd");

            $.ajax({
                type: 'GET',
                data: {id: id},
                dataType: 'json',
                url: '/khusedcar/admin/blockedUser',
                success: function (result) {
                    if (result.code == '0000') {
                        window.location.href = "adminUser.html";
                    }
                    else if (result.code != '0000') {
                        alert("操作失败");
                    }
                },
                error: function (result) {
                    alert("发生错误");
                }
            })

        });
    });
</script>


</html>